{"version":3,"sources":["pul-base.behaviors.js"],"names":["$","Drupal","theme","prototype","pulBaseExampleButton","path","title","pulChatStatusBlock","chat_js_warning","chat_online","chat_offline","behaviors","pulSmoothScroll","attach","context","offset","offset_opacity","$back_to_top","window","scroll","this","scrollTop","addClass","removeClass","click","location","pathname","replace","hostname","target","hash","length","slice","animate","top","pulSearchHeadersLinkBehavior","href_staff","attr","href_website","href_databases","l_staff","replaceWith","l_site","l_db","pulMainMenuBehavior","once","menu","menuToggle","e","preventDefault","slideToggle","is","removeAttr","each","ga","text","page","pulResourceButtonBehavior","settings","viewOnlineLink","undecodeViewOnline","resolvePrefix","pul_base_theme","pulChatWidgetBehavior","chat_text_block","append","pulTrackFooterMenuUsage","pulTrackGetHelpMenuUsage","pulTrackNewsUsage","index","value","result_position","parseInt","console","log","pulRewriteTempStaff","link","update","email","pulTrackHoursUsage","pulTrackTabLinkUsage","pulTrackAllSearchUsage","jQuery"],"mappings":"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","file":"pul-base.scripts.min.js","sourcesContent":["(function ($) {\n\n  /**\n   * The recommended way for producing HTML markup through JavaScript is to write\n   * theming functions. These are similiar to the theming functions that you might\n   * know from 'phptemplate' (the default PHP templating engine used by most\n   * Drupal themes including Omega). JavaScript theme functions accept arguments\n   * and can be overriden by sub-themes.\n   *\n   * In most cases, there is no good reason to NOT wrap your markup producing\n   * JavaScript in a theme function.\n   */\n  Drupal.theme.prototype.pulBaseExampleButton = function (path, title) {\n    // Create an anchor element with jQuery.\n    return $('<a href=\"' + path + '\" title=\"' + title + '\">' + title + '</a>');\n  };\n\n\n  Drupal.theme.prototype.pulChatStatusBlock = function () {\n    var chat_js_warning = '<span class=\"needs-js\"></span>';\n    var chat_online = '<span class=\"libraryh3lp\" jid=\"libchatpul-main@chat.libraryh3lp.com\" style=\"display: none;\"><a class=\" button--libraryh3lp button--libraryh3lp__online\" href=\"http://library.princeton.edu/help/chat\"> Online now</a></span>';\n    var chat_offline = '<span class=\"libraryh3lp\" style=\"display: none;\"><a class=\" button--libraryh3lp button--libraryh3lp__offline\" href=\"http://library.princeton.edu/help/e-mail\"> Offline now</a></span>';\n    return chat_js_warning + chat_online + chat_offline;\n  };\n\n  /**\n   * Behaviors are Drupal's way of applying JavaScript to a page. In short, the\n   * advantage of Behaviors over a simple 'document.ready()' lies in how it\n   * interacts with content loaded through Ajax. Opposed to the\n   * 'document.ready()' event which is only fired once when the page is\n   * initially loaded, behaviors get re-executed whenever something is added to\n   * the page through Ajax.\n   *\n   * You can attach as many behaviors as you wish. In fact, instead of overloading\n   * a single behavior with multiple, completely unrelated tasks you should create\n   * a separate behavior for every separate task.\n   *\n   * In most cases, there is no good reason to NOT wrap your JavaScript code in a\n   * behavior.\n   *\n   * @param context\n   *   The context for which the behavior is being executed. This is either the\n   *   full page or a piece of HTML that was just added through Ajax.\n   * @param settings\n   *   An array of settings (added through drupal_add_js()). Instead of accessing\n   *   Drupal.settings directly you should use this because of potential\n   *   modifications made by the Ajax callback that also produced 'context'.\n   */\n  //Drupal.behaviors.pulBaseExampleBehavior = {\n    //attach: function (context, settings) {\n      // By using the 'context' variable we make sure that our code only runs on\n      // the relevant HTML. Furthermore, by using jQuery.once() we make sure that\n      // we don't run the same piece of code for an HTML snippet that we already\n      // processed previously. By using .once('foo') all processed elements will\n      // get tagged with a 'foo-processed' class, causing all future invocations\n      // of this behavior to ignore them.\n      // $('.social-media', context).once('pul', function () {\n      //   // Now, we are invoking the previously declared theme function using two\n      //   // settings as arguments.\n      //   console.log(settings);\n      //   var $anchor = Drupal.theme('pulBaseExampleButton', settings.pul_base_theme.myExampleLinkPath, settings.pul_base_theme.myExampleLinkTitle);\n\n      //   // The anchor is then appended to the current element.\n      //   $anchor.appendTo(this);\n      // });\n    //}\n  //};\n\n  Drupal.behaviors.pulSmoothScroll = {\n    attach: function (context) {\n    // browser window scroll (in pixels) after which the \"back to top\" link is shown\n    var offset = 300,\n      //browser window scroll (in pixels) after which the \"back to top\" link opacity is reduced\n      offset_opacity = 1200,\n      //duration of the top scrolling animation (in ms)\n      scroll_top_duration = 700,\n      //grab the \"back to top\" link\n      $back_to_top = $('.cd-top');\n\n      //hide or show the \"back to top\" link\n      $(window).scroll(function(){\n        ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');\n        if( $(this).scrollTop() > offset_opacity ) { \n          $back_to_top.addClass('cd-fade-out');\n        }\n      });\n\n      //smooth scroll\n      $('a[href*=#l-page]').click(function() {\n        if (location.pathname.replace(/^\\//,'') == this.pathname.replace(/^\\//,'') && location.hostname == this.hostname) {\n          var target = $(this.hash);\n          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');\n          if (target.length) {\n            $('html,body').animate({\n              scrollTop: target.offset().top\n            }, 1000);\n            return false;\n          }\n        }\n      });\n    }\n  };\n\n  Drupal.behaviors.pulSearchHeadersLinkBehavior = {\n    attach: function (context) {\n      var href_staff = $('.page-find-all-results #general_site_user_search-panel_pane_1 .more-link a').attr('href');\n      var href_website = $('.page-find-all-results #general_site_keyword_search-panel_pane_1 .more-link a').attr('href');\n      var href_databases = $('.page-find-all-results #databases_keyword_search-panel_pane_2 .more-link a').attr('href');\n      //staff search\n      var l_staff = $('#general_site_user_search-panel_pane_1 .item-list li').length;\n      if (l_staff > 2) {\n        $('.page-find-all-results #general_site_user_search-panel_pane_1 h2').replaceWith(function() {\n            return '<h2><a href=\"' + href_staff + '\" title=\"See all library staff results.\"><i class=\"icon-staff\"></i>Library Staff Results</a></h2>';\n        });\n      } else {\n      }\n      //site search\n      var l_site = $('#general_site_keyword_search-panel_pane_1 .item-list li').length;\n      if(l_site > 2) {\n        $('.page-find-all-results #general_site_keyword_search-panel_pane_1 h2').replaceWith(function() {\n            return '<h2><a href=\"' + href_website + '\" title=\"See all library website results.\"><i class=\"icon-windows\"></i>Library Website Results</a></h2>';\n        });\n      } else {\n      }\n      // databases search\n      var l_db = $('#databases_keyword_search-panel_pane_2 .item-list li').length;\n      if(l_db > 2) {\n        $('.page-find-all-results #databases_keyword_search-panel_pane_2 h2').replaceWith(function() {\n          return '<h2><a href=\"' + href_databases + '\" title=\"See all database results.\"><i class=\"icon-databases\"></i>Databases Results</a></h2>';\n      });\n      } else {\n      }\n      \n    }\n  };\n\n  Drupal.behaviors.pulMainMenuBehavior = {\n    attach: function (context) {\n      // By using the 'context' variable we make sure that our code only runs on\n      // the relevant HTML. Furthermore, by using jQuery.once() we make sure that\n      // we don't run the same piece of code for an HTML snippet that we already\n      // processed previously. By using .once('foo') all processed elements will\n      // get tagged with a 'foo-processed' class, causing all future invocations\n      // of This behavior to ignore them.\n      //console.log(context);\n      //console.log(settings);\n      $('.centered-navigation-menu', context).once('pul', function () {\n        var menu = $('.centered-navigation-menu');\n        var menuToggle = $('.centered-navigation-menu-button');\n        $(menuToggle).click(function (e) {\n          e.preventDefault();\n          menu.slideToggle(function () {\n            if (menu.is(':hidden')) {\n              menu.removeAttr('style');\n            }\n          });\n        });\n\n        // track main menu usage with Google Analytics\n        \n        $('.centered-navigation-menu ul.menu a').each(function () {\n          $(this).click(function () {\n            ga('send', 'event', 'Main Menu', 'click', $(this).text(),\n              {'page': window.location.pathname });\n          });\n        });\n      });\n\n      // });\n      // Example Usage\n      // $('#block-system-main-menu', context).once('pul', function () {\n      //   // Now, we are invoking the previously declared theme function using two\n      //   // settings as arguments.\n      //   console.log(settings);\n      //   var $anchor = Drupal.theme('pulBaseExampleButton', 'cats', 'cats');\n\n      //   // The anchor is then appended to the current element.\n      //   $anchor.appendTo(this);\n      // });\n\n    }\n  };\n\n\n  Drupal.behaviors.pulResourceButtonBehavior = {\n    attach: function (context, settings) {\n      $('.field--name-field-db-access-url', context).once('pul', function () {\n        $('.field--name-field-db-access-url a, .field--name-field-db-access-url a').each(function () {\n          var viewOnlineLink = $(this).attr('href');\n          var undecodeViewOnline = viewOnlineLink.replace(/\\&amp%3B|&amp;/g, '&');\n          //console.log(undecodeViewOnline);\n          var resolvePrefix = settings.pul_base_theme.resolvePrefix;\n          $(this).attr('href', resolvePrefix + undecodeViewOnline);\n          $(this).attr('target', '_blank');\n        });\n      });\n    }\n  };\n\n  Drupal.behaviors.pulChatWidgetBehavior = {\n    attach: function (context) {\n      $('.library-three-help', context).once('pul', function () {\n        var chat_text_block = Drupal.theme('pulChatStatusBlock');\n        $(this).append(chat_text_block);\n      });\n    }\n  };\n    \n  Drupal.behaviors.pulTrackFooterMenuUsage = {\n    attach: function (context) {\n      $('.l-region--footer', context).once('pul', function () {\n        $('.l-region--footer .block--menu a').each(function () {\n          $(this).addClass('footer-link');\n          $(this).click(function () {\n            ga('send', 'event', 'Footer Menu', 'click', $(this).text(), \n              {'page': window.location.pathname});\n          });\n        });\n      });\n    }\n  };\n\n  Drupal.behaviors.pulTrackGetHelpMenuUsage = {\n    attach: function (context) {\n      $('.pane-menu-menu-get-help-menu', context).once('pul', function () {\n        $('.pane-menu-menu-get-help-menu a').each(function () {\n          $(this).addClass('get-help-link');\n          $(this).click(function () {\n            ga('send', 'event', 'Get Help Menu', 'click', $(this).text());\n          });\n        });\n      });\n    }\n  };\n\n  Drupal.behaviors.pulTrackNewsUsage = {\n    attach: function (context) {\n      $('.view-library-news', context).once('pul', function () {\n        $('.view-library-news a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).addClass('library-news-link');\n          $(this).click(function () {\n            ga('send', 'event', 'Library News', 'click', $(this).text() + ' Position ' + result_position);\n            console.log('logging ' + $(this).text() + result_position);\n          });\n        });\n      });\n    }\n  };\n\n\n  Drupal.behaviors.pulRewriteTempStaff = {\n    attach: function (context) {\n      $('.view-staff-department-list', context).once('pul', function () {\n        $('tbody a').each(function (index, value) {\n          var link = $(this).attr('href');\n          var update = link.replace(/temp_/, '');\n          $(this).attr('href', update);\n        });\n        $('tbody td.views-field-mail').each(function (index, value) {\n          var email = $(this).text();\n          var update = email.replace(/(temp_|_test)/, '');\n          $(this).text(update);\n        });\n      });\n    }\n  };\n\n  Drupal.behaviors.pulTrackHoursUsage = {\n    attach: function (context) {\n      $('.pane-library-hours', context).once('pul', function () {\n        $('.pane-library-hours a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).addClass('library-hours-link');\n          $(this).click(function () {\n            ga('send', 'event', 'Library Daily Hours', 'click', $(this).text() + ' Position ' + result_position);\n            console.log('logging ' + $(this).text() + result_position);\n          });\n        });\n      });\n    }\n  };\n\n  Drupal.behaviors.pulTrackTabLinkUsage = {\n    attach: function (context) {\n      // all search tab\n      $('#quicktabs-tabpage-homepage_search_tabs-0 .homepage-tab-form-message', context).once('pul', function () {\n        $('#quicktabs-tabpage-homepage_search_tabs-0 .homepage-tab-form-message a').each(function () {\n          $(this).click(function () {\n            ga('send', 'event', $(this).text(), 'All Tab');\n          });\n        });\n      });\n      // books+ tab\n      $('#quicktabs-tabpage-homepage_search_tabs-1 .homepage-tab-form-message', context).once('pul', function () {\n        $('#quicktabs-tabpage-homepage_search_tabs-1 .homepage-tab-form-message a').each(function () {\n          $(this).click(function () {\n            ga('send', 'event', $(this).text(), 'Books+ Tab');\n          });\n        });\n      });\n      // articles+ tab\n      $('#quicktabs-tabpage-homepage_search_tabs-2 .homepage-tab-form-message', context).once('pul', function () {\n        $('#quicktabs-tabpage-homepage_search_tabs-2 .homepage-tab-form-message a').each(function () {\n          $(this).click(function () {\n            ga('send', 'event', $(this).text(), 'Articles+ Tab');\n          });\n        });\n      });\n      // databases tab\n      $('#quicktabs-tabpage-homepage_search_tabs-3 .homepage-tab-form-message', context).once('pul', function () {\n        $('#quicktabs-tabpage-homepage_search_tabs-3 .homepage-tab-form-message a').each(function () {\n          $(this).click(function () {\n            ga('send', 'event', $(this).text(), 'Databases Tab');\n          });\n        });\n      });\n    }\n  };\n  \n  Drupal.behaviors.pulTrackAllSearchUsage = {\n    attach: function (context) {\n\n      $('.page-find-all-results .l-main').once('pul', function () {\n\n        $('.view-databases-keyword-search .item-list .database-title').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n            ga('send', 'event', 'All Search', 'Database Title', 'Position ' + result_position);\n            console.log('db title: ' + result_position);\n          });\n        });\n\n        // for subjects block\n        $(' .view-database-subject-search .item-list a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n            ga('send', 'event', 'All Search', 'Database Subject', 'Position ' + result_position);\n          });\n        });\n\n        //general keyword search view\n        $(' .view-general-site-keyword-search .item-list .database-titles a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n            ga('send', 'event', 'All Search', 'Website Search', 'Position ' + result_position);\n          });\n        });\n\n        //people search\n        $(' .view-general-site-user-search .item-list .user-link').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'All Search', 'People Search', 'Position ' + result_position);\n            });\n        });\n\n          // Add tracking codes to expand links on all search\n          // refine-link = top class more-link - bottom\n        $(' .view-databases-keyword-search .refine-link a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Database', 'Top');\n            });\n        });\n\n        // website search\n        $(' .view-general-site-keyword-search .refine-link a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Website Search', 'Top');\n            });\n        });\n\n        $(' .view-databases-keyword-search .more-link a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Database', 'Bottom');\n            });\n        });\n\n        $(' .view-databases-subject-search .more-link a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Subject Browse', 'Bottom');\n            });\n        });\n\n        $(' .view-general-site-user-search .more-link a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'People Search', 'Bottom');\n            });\n        });\n\n        $(' .view-general-site-keyword-search .more-link a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Website Search', 'Bottom');\n            });\n        });\n        // libraries and collections\n        $(' .view-search-libraries-and-collections h3 a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Libraries and Collections', 'Title');\n            });\n        });\n        \n        $(' .view-search-libraries-and-collections .views-field-field-library-homepage-url a').each(function (index, value) {\n          var result_position = parseInt(index, 10) + 1;\n          $(this).click(function () {\n              ga('send', 'event', 'Expand All Search', 'Libraries and Collections', 'Homepage URL');\n            });\n        });\n\n      });\n    }\n  };\n  \n})(jQuery);\n"],"sourceRoot":"/source/"}